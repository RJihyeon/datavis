{"ast":null,"code":"var _jsxFileName = \"C:\\\\dev\\\\datavis_team\\\\frontend\\\\src\\\\components\\\\\\uAC00\\uC815\\uD3ED\\uB825_\\uBCF4\\uD638\\uC870\\uCE58\\\\ProtectionChart.jsx\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useRef, useState } from \"react\";\nimport * as d3 from \"d3\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction ProtectionChart({\n  voronoi = false\n}) {\n  _s();\n  const ref = useRef();\n  ///data mapping\n  const [unemployment, setData] = useState([]);\n  useEffect(() => {\n    d3.csv(\"/domestic_violence/경찰청_가정폭력 피해자 보호조치 현황_20221231_utf8.csv\").then(loadedData => {\n      console.log(loadedData); // 데이터 구조 확인\n      setData(loadedData);\n    });\n  }, []);\n  useEffect(() => {\n    if (!unemployment.length) {\n      return;\n    }\n    const width = 928;\n    const height = 600;\n    const marginTop = 20;\n    const marginRight = 20;\n    const marginBottom = 30;\n    const marginLeft = 30;\n    const svg = d3.select(ref.current);\n    svg.selectAll(\"*\").remove(); // 초기화\n\n    const x = d3.scaleUtc().domain(d3.extent(unemployment, d => d.date)).range([marginLeft, width - marginRight]);\n    const y = d3.scaleLinear().domain([0, d3.max(unemployment, d => d.unemployment)]).nice().range([height - marginBottom, marginTop]);\n    svg.attr(\"viewBox\", [0, 0, width, height]);\n    svg.append(\"g\").attr(\"transform\", `translate(0,${height - marginBottom})`).call(d3.axisBottom(x).ticks(width / 80).tickSizeOuter(0));\n    svg.append(\"g\").attr(\"transform\", `translate(${marginLeft},0)`).call(d3.axisLeft(y)).call(g => g.select(\".domain\").remove()).call(g => g.selectAll(\".tick line\").clone().attr(\"x2\", width - marginLeft - marginRight).attr(\"stroke-opacity\", 0.1)).call(g => g.append(\"text\").attr(\"x\", -marginLeft).attr(\"y\", 10).attr(\"fill\", \"currentColor\").attr(\"text-anchor\", \"start\").text(\"↑ Unemployment (%)\"));\n    const points = unemployment.map(d => [x(d.date), y(d.unemployment), d.division]);\n    if (voronoi) {\n      svg.append(\"path\").attr(\"fill\", \"none\").attr(\"stroke\", \"#ccc\").attr(\"d\", d3.Delaunay.from(points).voronoi([0, 0, width, height]).render());\n    }\n    const line = d3.line();\n    const path = svg.append(\"g\").attr(\"fill\", \"none\").attr(\"stroke\", \"steelblue\").attr(\"stroke-width\", 1.5).attr(\"stroke-linejoin\", \"round\").attr(\"stroke-linecap\", \"round\").selectAll(\"path\").data(d3.rollup(points, v => ({\n      points: v,\n      z: v[0][2]\n    }), d => d[2]).values()).join(\"path\").style(\"mix-blend-mode\", \"multiply\").attr(\"d\", d => line(d.points.map(p => [p[0], p[1]])));\n\n    // 이벤트 핸들러와 상호작용은 빼두었습니다. 필요하다면 추가해야 할 것입니다.\n  }, [unemployment, voronoi]); // 종속성 배열에 voronoi 추가\n\n  return /*#__PURE__*/_jsxDEV(\"svg\", {\n    ref: ref,\n    style: {\n      width: \"100%\",\n      height: \"auto\"\n    }\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 120,\n    columnNumber: 10\n  }, this);\n}\n_s(ProtectionChart, \"aPDYolypD4VUxJIicNL7kNF9doQ=\");\n_c = ProtectionChart;\nexport default ProtectionChart;\nvar _c;\n$RefreshReg$(_c, \"ProtectionChart\");","map":{"version":3,"names":["React","useEffect","useRef","useState","d3","jsxDEV","_jsxDEV","ProtectionChart","voronoi","_s","ref","unemployment","setData","csv","then","loadedData","console","log","length","width","height","marginTop","marginRight","marginBottom","marginLeft","svg","select","current","selectAll","remove","x","scaleUtc","domain","extent","d","date","range","y","scaleLinear","max","nice","attr","append","call","axisBottom","ticks","tickSizeOuter","axisLeft","g","clone","text","points","map","division","Delaunay","from","render","line","path","data","rollup","v","z","values","join","style","p","fileName","_jsxFileName","lineNumber","columnNumber","_c","$RefreshReg$"],"sources":["C:/dev/datavis_team/frontend/src/components/가정폭력_보호조치/ProtectionChart.jsx"],"sourcesContent":["import React, { useEffect, useRef, useState } from \"react\";\r\nimport * as d3 from \"d3\";\r\n\r\nfunction ProtectionChart({voronoi = false }) {\r\n  const ref = useRef();\r\n  ///data mapping\r\n  const [unemployment, setData] = useState([]);\r\n\r\n  useEffect(() => {\r\n    d3.csv(\r\n      \"/domestic_violence/경찰청_가정폭력 피해자 보호조치 현황_20221231_utf8.csv\"\r\n    ).then((loadedData) => {\r\n      console.log(loadedData); // 데이터 구조 확인\r\n      setData(loadedData);\r\n    });\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    if (!unemployment.length) {\r\n      return;\r\n    }\r\n\r\n    const width = 928;\r\n    const height = 600;\r\n    const marginTop = 20;\r\n    const marginRight = 20;\r\n    const marginBottom = 30;\r\n    const marginLeft = 30;\r\n\r\n    const svg = d3.select(ref.current);\r\n    svg.selectAll(\"*\").remove(); // 초기화\r\n\r\n    const x = d3\r\n      .scaleUtc()\r\n      .domain(d3.extent(unemployment, (d) => d.date))\r\n      .range([marginLeft, width - marginRight]);\r\n\r\n    const y = d3\r\n      .scaleLinear()\r\n      .domain([0, d3.max(unemployment, (d) => d.unemployment)])\r\n      .nice()\r\n      .range([height - marginBottom, marginTop]);\r\n\r\n    svg.attr(\"viewBox\", [0, 0, width, height]);\r\n\r\n    svg\r\n      .append(\"g\")\r\n      .attr(\"transform\", `translate(0,${height - marginBottom})`)\r\n      .call(\r\n        d3\r\n          .axisBottom(x)\r\n          .ticks(width / 80)\r\n          .tickSizeOuter(0)\r\n      );\r\n\r\n    svg\r\n      .append(\"g\")\r\n      .attr(\"transform\", `translate(${marginLeft},0)`)\r\n      .call(d3.axisLeft(y))\r\n      .call((g) => g.select(\".domain\").remove())\r\n      .call((g) =>\r\n        g\r\n          .selectAll(\".tick line\")\r\n          .clone()\r\n          .attr(\"x2\", width - marginLeft - marginRight)\r\n          .attr(\"stroke-opacity\", 0.1)\r\n      )\r\n      .call((g) =>\r\n        g\r\n          .append(\"text\")\r\n          .attr(\"x\", -marginLeft)\r\n          .attr(\"y\", 10)\r\n          .attr(\"fill\", \"currentColor\")\r\n          .attr(\"text-anchor\", \"start\")\r\n          .text(\"↑ Unemployment (%)\")\r\n      );\r\n\r\n    const points = unemployment.map((d) => [\r\n      x(d.date),\r\n      y(d.unemployment),\r\n      d.division,\r\n    ]);\r\n\r\n    if (voronoi) {\r\n      svg\r\n        .append(\"path\")\r\n        .attr(\"fill\", \"none\")\r\n        .attr(\"stroke\", \"#ccc\")\r\n        .attr(\r\n          \"d\",\r\n          d3.Delaunay.from(points).voronoi([0, 0, width, height]).render()\r\n        );\r\n    }\r\n\r\n    const line = d3.line();\r\n    const path = svg\r\n      .append(\"g\")\r\n      .attr(\"fill\", \"none\")\r\n      .attr(\"stroke\", \"steelblue\")\r\n      .attr(\"stroke-width\", 1.5)\r\n      .attr(\"stroke-linejoin\", \"round\")\r\n      .attr(\"stroke-linecap\", \"round\")\r\n      .selectAll(\"path\")\r\n      .data(\r\n        d3\r\n          .rollup(\r\n            points,\r\n            (v) => ({ points: v, z: v[0][2] }),\r\n            (d) => d[2]\r\n          )\r\n          .values()\r\n      )\r\n      .join(\"path\")\r\n      .style(\"mix-blend-mode\", \"multiply\")\r\n      .attr(\"d\", (d) => line(d.points.map((p) => [p[0], p[1]])));\r\n\r\n    // 이벤트 핸들러와 상호작용은 빼두었습니다. 필요하다면 추가해야 할 것입니다.\r\n  }, [unemployment, voronoi]); // 종속성 배열에 voronoi 추가\r\n\r\n  return <svg ref={ref} style={{ width: \"100%\", height: \"auto\" }}></svg>;\r\n}\r\n\r\nexport default ProtectionChart;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}